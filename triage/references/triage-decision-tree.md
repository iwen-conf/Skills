# UI/UX 回归失败：分流决策树（精简）

> 目标：最快把问题分到“产品缺陷 / 测试误报 / 环境问题 / 数据问题 / Flake”其中一类，并用证据闭环。

## 1) 先确认：环境是不是根本没起来

- 服务未启动/端口冲突/健康检查失败/数据库不可达 → **环境问题**
- 证据：服务日志、端口监听、health endpoint、容器状态

## 2) UI 选择器/文案变更是否导致“找不到元素”

- selector 不存在 / 文案变更 / aria-role 变更 → 优先判为 **测试误报**
- 证据：DOM 截图、页面源码、开发确认最近 UI 重构
- 修复：引入 `data-testid` 或稳定选择器；避免依赖易变文案

## 3) 是否是典型时序问题（等待条件不足）

- 偶发失败、重跑同一步可能通过 → **Flake/时序**
- 证据：同 commit 下多次运行结果差异；网络慢/动画/异步请求未完成
- 修复：等待更稳定的条件（元素可见+可点击、网络 idle、toast 出现等）

## 4) 是否涉及登录态/权限/鉴权

- 401/403、登录态丢失、跨角色未 logout、token 过期 → **鉴权/权限类缺陷** 或 **测试会话管理问题**
- 证据：后端 auth 日志、UI 提示、请求状态码
- 约束：禁止通过短路/放宽权限“让它过”，必须符合业务预期

## 5) 是否是后端异常或数据一致性

- 500/超时/接口返回字段异常/状态机不一致 → **产品缺陷**
- 证据：后端堆栈、请求/响应摘要、DB SELECT 验证

